# PX4代码整体结构

## 目录文件夹内容

| 目录      | 作用                                                         |
| --------- | ------------------------------------------------------------ |
| src       | 功能源代码，包含所有控制相关的功能代码                       |
| build     | 编译目标目录，包含程序源代码编译后生成的编译选项、目标文件、中间文件等 |
| cmake     | 编译配置文件，存放PX4项目编译相关的配置                      |
| platforms | 存放飞控程序运行平台代码                                     |
| msg       | 内部通信接口，用来存放内部通信的消息文件                     |
| Mavlink   | 外部通信接口，存放mavlink协议所用头文件                      |
| ROMFS     | ROM文件系统，非空程序启动相关配置以及不同机型的混合控制文件  |
| Tools     | 存放仿真及与其他软件使用的工具脚本                           |



## src文件夹解析

### .drivers文件夹

包含非空程序中所有的驱动程序。



### .include文件夹

主要包含非空程序所用的头文件。



### .lib文件夹

包含很多公共算法函数与数学工具函数，部分模块具体功能如下表。

| 模块名称   | 功能           |
| ---------- | -------------- |
| airspeed   | 空速计算       |
| mathlib    | 数学函数库     |
| matrix     | 矩阵计算       |
| battery    | 电源功能       |
| controllib | 控制算法       |
| conversion | 旋转转换       |
| EKF        | 扩展卡尔曼滤波 |
| rc         | 遥控器协议解析 |



### .modules文件夹

包括无人机相关上层应用的控制模块，如导航、规划、地面站通信、命令执行等内容。



### .platforms文件夹

定义与运行平台相关头文件，实现工作队列、多进程、多线程等相关系统特性。



### .systemcmd文件夹

实现了多个系统命令，飞控采用系统为NuttX。



### .examples文件夹

PX4官方提供的一些学习例子。